{"version":3,"sources":["webpack:///webpack/bootstrap 40381987e96320a429cc","webpack:///./src/sfb.js","webpack:///./~/frontend-pagebuilder/src/fpb.js","webpack:///./~/frontend-pagebuilder/~/sortablejs/Sortable.js","webpack:///./~/frontend-pagebuilder/src/scss/fpb-styles.scss","webpack:///./src/scss/sfb-styles.scss"],"names":["require","fpb","init","tinymce","window","ready","fn","document","attachEvent","readyState","addEventListener","forEach","array","callback","scope","i","length","call","FrontendPageBuilder","selector","inline","toolbar","menubar","serializeContent","areas","querySelectorAll","area","data","sections","section","sectiondata","fields","field","name","getAttribute","type","value","innerHTML","push","console","log","JSON","stringify","buttonrow","create","animation","handle","insertAdjacentHTML","getElementById","e","sortableModule","factory","define","module","exports","sortableFactory","sortableError","Error","dragEl","parentEl","ghostEl","cloneEl","rootEl","nextEl","lastDownEl","scrollEl","scrollParentEl","scrollCustomFn","lastEl","lastCSS","lastParentCSS","oldIndex","newIndex","activeGroup","putSortable","autoScroll","tapEvt","touchEvt","moved","R_SPACE","R_FLOAT","expando","Date","getTime","win","parseInt","$","jQuery","Zepto","Polymer","captureMode","supportDraggable","createElement","supportCssPointerEvents","el","navigator","userAgent","match","style","cssText","pointerEvents","_silent","abs","Math","min","savedInputChecked","touchDragOverListeners","_autoScroll","_throttle","evt","options","scroll","_this","rect","sens","scrollSensitivity","speed","scrollSpeed","x","clientX","y","clientY","winWidth","innerWidth","winHeight","innerHeight","vx","vy","scrollOffsetX","scrollOffsetY","scrollFn","offsetWidth","scrollWidth","offsetHeight","scrollHeight","parentNode","getBoundingClientRect","right","left","bottom","top","clearInterval","pid","setInterval","scrollTo","pageXOffset","pageYOffset","scrollTop","scrollLeft","_prepareGroup","toFn","pull","group","to","from","fromGroup","join","indexOf","originalGroup","checkPull","checkPut","put","revertClone","Sortable","nodeType","toString","_extend","defaults","random","sort","disabled","store","draggable","test","nodeName","ghostClass","chosenClass","dragClass","ignore","filter","preventOnFilter","setData","dataTransfer","textContent","dropBubble","dragoverBubble","dataIdAttr","delay","forceFallback","fallbackClass","fallbackOnBody","fallbackTolerance","fallbackOffset","charAt","bind","nativeDraggable","_on","_onTapStart","_onDragOver","get","prototype","constructor","touch","touches","target","originalTarget","shadowRoot","path","startIndex","_saveInputCheckedState","button","_closest","_index","_dispatchEvent","preventDefault","split","some","criteria","trim","_prepareDragStart","ownerDocument","dragStartFn","nextSibling","_lastX","_lastY","_disableDelayedDrag","_toggleClass","_triggerDragStart","_find","_disableDraggable","_onDrop","_dragStartTimer","setTimeout","clearTimeout","_off","pointerType","_onDragStart","selection","empty","getSelection","removeAllRanges","err","_dragStarted","active","_nulling","_emulateDragOver","_css","elementFromPoint","parent","_onTouchMove","dx","dy","translate3d","_appendGhost","css","ghostRect","cloneNode","marginTop","marginLeft","width","height","body","appendChild","useFallback","_offUpEvents","_clone","insertBefore","_loopId","effectAllowed","dragRect","targetRect","revert","activeSortable","isOwner","isMovingBetweenSortable","canSort","stopPropagation","animated","contains","lastPullMode","_cloneHide","children","_ghostIsLast","lastElementChild","_onMove","_animate","floating","cssFloat","display","isWide","isLong","halfway","nextElementSibling","after","elTop","offsetTop","tgTop","previousElementSibling","moveVector","_unsilent","prevRect","ms","currentRect","removeChild","save","checked","handleEvent","_globalDragOver","toArray","order","n","_generateId","items","id","set","closest","option","destroy","Array","removeAttribute","splice","sortable","state","ctx","_matches","_getParentOrHost","host","dropEffect","event","removeEventListener","classList","className","replace","prop","val","defaultView","getComputedStyle","currentStyle","tagName","iterator","list","getElementsByTagName","targetEl","fromEl","createEvent","onName","toUpperCase","substr","initEvent","item","clone","dispatchEvent","toEl","originalEvt","willInsertAfter","onMoveFn","onMove","retVal","dragged","draggedRect","related","relatedRect","str","src","href","sum","charCodeAt","index","tag","shift","re","RegExp","args","arguments","apply","dst","key","hasOwnProperty","dom","root","inputs","idx","Object","defineProperty","capture","passive","utils","on","off","find","is","extend","throttle","toggleClass","version"],"mappings":"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","file":"js/sfb.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 40381987e96320a429cc","require(\"./scss/sfb-styles.scss\");\nimport FrontendPageBuilder from \"frontend-pagebuilder\";\n\nconst fpb = new FrontendPageBuilder();\nfpb.init();\n\n\n// WEBPACK FOOTER //\n// ./src/sfb.js","require(\"./scss/fpb-styles.scss\");\nimport Sortable from \"sortablejs\";\nvar tinymce = window.tinymce; //BAD\n\nfunction ready(fn) {\n  if (document.attachEvent ? document.readyState === \"complete\" : document.readyState !== \"loading\"){\n    fn();\n  } else {\n    document.addEventListener('DOMContentLoaded', fn);\n  }\n}\n\n// forEach method, could be shipped as part of an Object Literal/Module\nvar forEach = function (array, callback, scope) {\n  for (var i = 0; i < array.length; i++) {\n    callback.call(scope, i, array[i]); // passes back stuff we need\n  }\n};\n\nclass FrontendPageBuilder {\n    constructor() {\n    }\n    init() {\n        tinymce.init({\n            selector: '[data-sfb-valuetype=\"string\"]',\n            inline: true,\n            toolbar: 'undo redo',\n            menubar: false\n        });\n\n        tinymce.init({\n            selector: '[data-sfb-valuetype=\"rich\"]',\n            inline: true,\n            // toolbar: 'undo redo',\n            menubar: false\n        });\n\n        function serializeContent() {\n            var areas = document.querySelectorAll(\"[data-sfb-content]\");\n            forEach(areas, function(i, area){\n                var data = [];\n                var sections = area.querySelectorAll(\"[data-sfb-section]\");\n                forEach(sections, function(i, section){\n                    var sectiondata = {};\n                    var fields = section.querySelectorAll(\"[data-sfb-value]\");\n                    forEach(fields, function(i, field) {\n                        var name = field.getAttribute(\"data-sfb-value\");\n                        var type = field.getAttribute(\"data-sfb-valuetype\");\n                        var value = field.innerHTML;\n                        sectiondata[name] = value;\n                    });\n                    data.push(sectiondata);\n                });\n                console.log(JSON.stringify(data));\n            });\n        }\n\n        var buttonrow = '<ul class=\"sfb-tools\"><li class=\"sfb-tools_handle\"></li><li class=\"sfb-tools_edit\"></li><li class=\"sfb-tools_trash\"></li><li class=\"sfb-tools_show\"></li></ul><div class=\"sfb-overlay\"><span></span><span></span><span></span><span></span></div>'\n\n        ready(function() {\n\n            var areas = document.querySelectorAll(\"[data-sfb-content]\");\n            forEach(areas, function(i, area){\n                Sortable.create(area, {\n                    animation: 150,\n                    // draggable: \"[data-sfb-section]\",\n                    handle: \".sfb-tools_handle\"\n                });\n                var sections = area.querySelectorAll(\"[data-sfb-section]\");\n                forEach(sections, function(i, section){\n                    section.insertAdjacentHTML('afterbegin', buttonrow);\n                    // section.classList.add(\"sfb-draggable\");\n                });\n            });\n\n            document.getElementById(\"sfb-save\").addEventListener(\"click\", function(e) {\n                serializeContent();\n            });\n        });\n    }\n}\n\nexport default FrontendPageBuilder;\n\n\n// WEBPACK FOOTER //\n// ./~/frontend-pagebuilder/src/fpb.js","/**!\n * Sortable\n * @author\tRubaXa   <trash@rubaxa.org>\n * @license MIT\n */\n\n(function sortableModule(factory) {\n\t\"use strict\";\n\n\tif (typeof define === \"function\" && define.amd) {\n\t\tdefine(factory);\n\t}\n\telse if (typeof module != \"undefined\" && typeof module.exports != \"undefined\") {\n\t\tmodule.exports = factory();\n\t}\n\telse {\n\t\t/* jshint sub:true */\n\t\twindow[\"Sortable\"] = factory();\n\t}\n})(function sortableFactory() {\n\t\"use strict\";\n\n\tif (typeof window == \"undefined\" || !window.document) {\n\t\treturn function sortableError() {\n\t\t\tthrow new Error(\"Sortable.js requires a window with a document\");\n\t\t};\n\t}\n\n\tvar dragEl,\n\t\tparentEl,\n\t\tghostEl,\n\t\tcloneEl,\n\t\trootEl,\n\t\tnextEl,\n\t\tlastDownEl,\n\n\t\tscrollEl,\n\t\tscrollParentEl,\n\t\tscrollCustomFn,\n\n\t\tlastEl,\n\t\tlastCSS,\n\t\tlastParentCSS,\n\n\t\toldIndex,\n\t\tnewIndex,\n\n\t\tactiveGroup,\n\t\tputSortable,\n\n\t\tautoScroll = {},\n\n\t\ttapEvt,\n\t\ttouchEvt,\n\n\t\tmoved,\n\n\t\t/** @const */\n\t\tR_SPACE = /\\s+/g,\n\t\tR_FLOAT = /left|right|inline/,\n\n\t\texpando = 'Sortable' + (new Date).getTime(),\n\n\t\twin = window,\n\t\tdocument = win.document,\n\t\tparseInt = win.parseInt,\n\n\t\t$ = win.jQuery || win.Zepto,\n\t\tPolymer = win.Polymer,\n\n\t\tcaptureMode = false,\n\n\t\tsupportDraggable = !!('draggable' in document.createElement('div')),\n\t\tsupportCssPointerEvents = (function (el) {\n\t\t\t// false when IE11\n\t\t\tif (!!navigator.userAgent.match(/Trident.*rv[ :]?11\\./)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tel = document.createElement('x');\n\t\t\tel.style.cssText = 'pointer-events:auto';\n\t\t\treturn el.style.pointerEvents === 'auto';\n\t\t})(),\n\n\t\t_silent = false,\n\n\t\tabs = Math.abs,\n\t\tmin = Math.min,\n\n\t\tsavedInputChecked = [],\n\t\ttouchDragOverListeners = [],\n\n\t\t_autoScroll = _throttle(function (/**Event*/evt, /**Object*/options, /**HTMLElement*/rootEl) {\n\t\t\t// Bug: https://bugzilla.mozilla.org/show_bug.cgi?id=505521\n\t\t\tif (rootEl && options.scroll) {\n\t\t\t\tvar _this = rootEl[expando],\n\t\t\t\t\tel,\n\t\t\t\t\trect,\n\t\t\t\t\tsens = options.scrollSensitivity,\n\t\t\t\t\tspeed = options.scrollSpeed,\n\n\t\t\t\t\tx = evt.clientX,\n\t\t\t\t\ty = evt.clientY,\n\n\t\t\t\t\twinWidth = window.innerWidth,\n\t\t\t\t\twinHeight = window.innerHeight,\n\n\t\t\t\t\tvx,\n\t\t\t\t\tvy,\n\n\t\t\t\t\tscrollOffsetX,\n\t\t\t\t\tscrollOffsetY\n\t\t\t\t;\n\n\t\t\t\t// Delect scrollEl\n\t\t\t\tif (scrollParentEl !== rootEl) {\n\t\t\t\t\tscrollEl = options.scroll;\n\t\t\t\t\tscrollParentEl = rootEl;\n\t\t\t\t\tscrollCustomFn = options.scrollFn;\n\n\t\t\t\t\tif (scrollEl === true) {\n\t\t\t\t\t\tscrollEl = rootEl;\n\n\t\t\t\t\t\tdo {\n\t\t\t\t\t\t\tif ((scrollEl.offsetWidth < scrollEl.scrollWidth) ||\n\t\t\t\t\t\t\t\t(scrollEl.offsetHeight < scrollEl.scrollHeight)\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/* jshint boss:true */\n\t\t\t\t\t\t} while (scrollEl = scrollEl.parentNode);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (scrollEl) {\n\t\t\t\t\tel = scrollEl;\n\t\t\t\t\trect = scrollEl.getBoundingClientRect();\n\t\t\t\t\tvx = (abs(rect.right - x) <= sens) - (abs(rect.left - x) <= sens);\n\t\t\t\t\tvy = (abs(rect.bottom - y) <= sens) - (abs(rect.top - y) <= sens);\n\t\t\t\t}\n\n\n\t\t\t\tif (!(vx || vy)) {\n\t\t\t\t\tvx = (winWidth - x <= sens) - (x <= sens);\n\t\t\t\t\tvy = (winHeight - y <= sens) - (y <= sens);\n\n\t\t\t\t\t/* jshint expr:true */\n\t\t\t\t\t(vx || vy) && (el = win);\n\t\t\t\t}\n\n\n\t\t\t\tif (autoScroll.vx !== vx || autoScroll.vy !== vy || autoScroll.el !== el) {\n\t\t\t\t\tautoScroll.el = el;\n\t\t\t\t\tautoScroll.vx = vx;\n\t\t\t\t\tautoScroll.vy = vy;\n\n\t\t\t\t\tclearInterval(autoScroll.pid);\n\n\t\t\t\t\tif (el) {\n\t\t\t\t\t\tautoScroll.pid = setInterval(function () {\n\t\t\t\t\t\t\tscrollOffsetY = vy ? vy * speed : 0;\n\t\t\t\t\t\t\tscrollOffsetX = vx ? vx * speed : 0;\n\n\t\t\t\t\t\t\tif ('function' === typeof(scrollCustomFn)) {\n\t\t\t\t\t\t\t\treturn scrollCustomFn.call(_this, scrollOffsetX, scrollOffsetY, evt);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (el === win) {\n\t\t\t\t\t\t\t\twin.scrollTo(win.pageXOffset + scrollOffsetX, win.pageYOffset + scrollOffsetY);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tel.scrollTop += scrollOffsetY;\n\t\t\t\t\t\t\t\tel.scrollLeft += scrollOffsetX;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}, 24);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}, 30),\n\n\t\t_prepareGroup = function (options) {\n\t\t\tfunction toFn(value, pull) {\n\t\t\t\tif (value === void 0 || value === true) {\n\t\t\t\t\tvalue = group.name;\n\t\t\t\t}\n\n\t\t\t\tif (typeof value === 'function') {\n\t\t\t\t\treturn value;\n\t\t\t\t} else {\n\t\t\t\t\treturn function (to, from) {\n\t\t\t\t\t\tvar fromGroup = from.options.group.name;\n\n\t\t\t\t\t\treturn pull\n\t\t\t\t\t\t\t? value\n\t\t\t\t\t\t\t: value && (value.join\n\t\t\t\t\t\t\t\t? value.indexOf(fromGroup) > -1\n\t\t\t\t\t\t\t\t: (fromGroup == value)\n\t\t\t\t\t\t\t);\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar group = {};\n\t\t\tvar originalGroup = options.group;\n\n\t\t\tif (!originalGroup || typeof originalGroup != 'object') {\n\t\t\t\toriginalGroup = {name: originalGroup};\n\t\t\t}\n\n\t\t\tgroup.name = originalGroup.name;\n\t\t\tgroup.checkPull = toFn(originalGroup.pull, true);\n\t\t\tgroup.checkPut = toFn(originalGroup.put);\n\t\t\tgroup.revertClone = originalGroup.revertClone;\n\n\t\t\toptions.group = group;\n\t\t}\n\t;\n\n\n\t/**\n\t * @class  Sortable\n\t * @param  {HTMLElement}  el\n\t * @param  {Object}       [options]\n\t */\n\tfunction Sortable(el, options) {\n\t\tif (!(el && el.nodeType && el.nodeType === 1)) {\n\t\t\tthrow 'Sortable: `el` must be HTMLElement, and not ' + {}.toString.call(el);\n\t\t}\n\n\t\tthis.el = el; // root element\n\t\tthis.options = options = _extend({}, options);\n\n\n\t\t// Export instance\n\t\tel[expando] = this;\n\n\t\t// Default options\n\t\tvar defaults = {\n\t\t\tgroup: Math.random(),\n\t\t\tsort: true,\n\t\t\tdisabled: false,\n\t\t\tstore: null,\n\t\t\thandle: null,\n\t\t\tscroll: true,\n\t\t\tscrollSensitivity: 30,\n\t\t\tscrollSpeed: 10,\n\t\t\tdraggable: /[uo]l/i.test(el.nodeName) ? 'li' : '>*',\n\t\t\tghostClass: 'sortable-ghost',\n\t\t\tchosenClass: 'sortable-chosen',\n\t\t\tdragClass: 'sortable-drag',\n\t\t\tignore: 'a, img',\n\t\t\tfilter: null,\n\t\t\tpreventOnFilter: true,\n\t\t\tanimation: 0,\n\t\t\tsetData: function (dataTransfer, dragEl) {\n\t\t\t\tdataTransfer.setData('Text', dragEl.textContent);\n\t\t\t},\n\t\t\tdropBubble: false,\n\t\t\tdragoverBubble: false,\n\t\t\tdataIdAttr: 'data-id',\n\t\t\tdelay: 0,\n\t\t\tforceFallback: false,\n\t\t\tfallbackClass: 'sortable-fallback',\n\t\t\tfallbackOnBody: false,\n\t\t\tfallbackTolerance: 0,\n\t\t\tfallbackOffset: {x: 0, y: 0}\n\t\t};\n\n\n\t\t// Set default options\n\t\tfor (var name in defaults) {\n\t\t\t!(name in options) && (options[name] = defaults[name]);\n\t\t}\n\n\t\t_prepareGroup(options);\n\n\t\t// Bind all private methods\n\t\tfor (var fn in this) {\n\t\t\tif (fn.charAt(0) === '_' && typeof this[fn] === 'function') {\n\t\t\t\tthis[fn] = this[fn].bind(this);\n\t\t\t}\n\t\t}\n\n\t\t// Setup drag mode\n\t\tthis.nativeDraggable = options.forceFallback ? false : supportDraggable;\n\n\t\t// Bind events\n\t\t_on(el, 'mousedown', this._onTapStart);\n\t\t_on(el, 'touchstart', this._onTapStart);\n\t\t_on(el, 'pointerdown', this._onTapStart);\n\n\t\tif (this.nativeDraggable) {\n\t\t\t_on(el, 'dragover', this);\n\t\t\t_on(el, 'dragenter', this);\n\t\t}\n\n\t\ttouchDragOverListeners.push(this._onDragOver);\n\n\t\t// Restore sorting\n\t\toptions.store && this.sort(options.store.get(this));\n\t}\n\n\n\tSortable.prototype = /** @lends Sortable.prototype */ {\n\t\tconstructor: Sortable,\n\n\t\t_onTapStart: function (/** Event|TouchEvent */evt) {\n\t\t\tvar _this = this,\n\t\t\t\tel = this.el,\n\t\t\t\toptions = this.options,\n\t\t\t\tpreventOnFilter = options.preventOnFilter,\n\t\t\t\ttype = evt.type,\n\t\t\t\ttouch = evt.touches && evt.touches[0],\n\t\t\t\ttarget = (touch || evt).target,\n\t\t\t\toriginalTarget = evt.target.shadowRoot && (evt.path && evt.path[0]) || target,\n\t\t\t\tfilter = options.filter,\n\t\t\t\tstartIndex;\n\n\t\t\t_saveInputCheckedState(el);\n\n\n\t\t\t// Don't trigger start event when an element is been dragged, otherwise the evt.oldindex always wrong when set option.group.\n\t\t\tif (dragEl) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (/mousedown|pointerdown/.test(type) && evt.button !== 0 || options.disabled) {\n\t\t\t\treturn; // only left button or enabled\n\t\t\t}\n\n\n\t\t\ttarget = _closest(target, options.draggable, el);\n\n\t\t\tif (!target) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (lastDownEl === target) {\n\t\t\t\t// Ignoring duplicate `down`\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Get the index of the dragged element within its parent\n\t\t\tstartIndex = _index(target, options.draggable);\n\n\t\t\t// Check filter\n\t\t\tif (typeof filter === 'function') {\n\t\t\t\tif (filter.call(this, evt, target, this)) {\n\t\t\t\t\t_dispatchEvent(_this, originalTarget, 'filter', target, el, startIndex);\n\t\t\t\t\tpreventOnFilter && evt.preventDefault();\n\t\t\t\t\treturn; // cancel dnd\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (filter) {\n\t\t\t\tfilter = filter.split(',').some(function (criteria) {\n\t\t\t\t\tcriteria = _closest(originalTarget, criteria.trim(), el);\n\n\t\t\t\t\tif (criteria) {\n\t\t\t\t\t\t_dispatchEvent(_this, criteria, 'filter', target, el, startIndex);\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif (filter) {\n\t\t\t\t\tpreventOnFilter && evt.preventDefault();\n\t\t\t\t\treturn; // cancel dnd\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (options.handle && !_closest(originalTarget, options.handle, el)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Prepare `dragstart`\n\t\t\tthis._prepareDragStart(evt, touch, target, startIndex);\n\t\t},\n\n\t\t_prepareDragStart: function (/** Event */evt, /** Touch */touch, /** HTMLElement */target, /** Number */startIndex) {\n\t\t\tvar _this = this,\n\t\t\t\tel = _this.el,\n\t\t\t\toptions = _this.options,\n\t\t\t\townerDocument = el.ownerDocument,\n\t\t\t\tdragStartFn;\n\n\t\t\tif (target && !dragEl && (target.parentNode === el)) {\n\t\t\t\ttapEvt = evt;\n\n\t\t\t\trootEl = el;\n\t\t\t\tdragEl = target;\n\t\t\t\tparentEl = dragEl.parentNode;\n\t\t\t\tnextEl = dragEl.nextSibling;\n\t\t\t\tlastDownEl = target;\n\t\t\t\tactiveGroup = options.group;\n\t\t\t\toldIndex = startIndex;\n\n\t\t\t\tthis._lastX = (touch || evt).clientX;\n\t\t\t\tthis._lastY = (touch || evt).clientY;\n\n\t\t\t\tdragEl.style['will-change'] = 'transform';\n\n\t\t\t\tdragStartFn = function () {\n\t\t\t\t\t// Delayed drag has been triggered\n\t\t\t\t\t// we can re-enable the events: touchmove/mousemove\n\t\t\t\t\t_this._disableDelayedDrag();\n\n\t\t\t\t\t// Make the element draggable\n\t\t\t\t\tdragEl.draggable = _this.nativeDraggable;\n\n\t\t\t\t\t// Chosen item\n\t\t\t\t\t_toggleClass(dragEl, options.chosenClass, true);\n\n\t\t\t\t\t// Bind the events: dragstart/dragend\n\t\t\t\t\t_this._triggerDragStart(evt, touch);\n\n\t\t\t\t\t// Drag start event\n\t\t\t\t\t_dispatchEvent(_this, rootEl, 'choose', dragEl, rootEl, oldIndex);\n\t\t\t\t};\n\n\t\t\t\t// Disable \"draggable\"\n\t\t\t\toptions.ignore.split(',').forEach(function (criteria) {\n\t\t\t\t\t_find(dragEl, criteria.trim(), _disableDraggable);\n\t\t\t\t});\n\n\t\t\t\t_on(ownerDocument, 'mouseup', _this._onDrop);\n\t\t\t\t_on(ownerDocument, 'touchend', _this._onDrop);\n\t\t\t\t_on(ownerDocument, 'touchcancel', _this._onDrop);\n\t\t\t\t_on(ownerDocument, 'pointercancel', _this._onDrop);\n\t\t\t\t_on(ownerDocument, 'selectstart', _this);\n\n\t\t\t\tif (options.delay) {\n\t\t\t\t\t// If the user moves the pointer or let go the click or touch\n\t\t\t\t\t// before the delay has been reached:\n\t\t\t\t\t// disable the delayed drag\n\t\t\t\t\t_on(ownerDocument, 'mouseup', _this._disableDelayedDrag);\n\t\t\t\t\t_on(ownerDocument, 'touchend', _this._disableDelayedDrag);\n\t\t\t\t\t_on(ownerDocument, 'touchcancel', _this._disableDelayedDrag);\n\t\t\t\t\t_on(ownerDocument, 'mousemove', _this._disableDelayedDrag);\n\t\t\t\t\t_on(ownerDocument, 'touchmove', _this._disableDelayedDrag);\n\t\t\t\t\t_on(ownerDocument, 'pointermove', _this._disableDelayedDrag);\n\n\t\t\t\t\t_this._dragStartTimer = setTimeout(dragStartFn, options.delay);\n\t\t\t\t} else {\n\t\t\t\t\tdragStartFn();\n\t\t\t\t}\n\n\n\t\t\t}\n\t\t},\n\n\t\t_disableDelayedDrag: function () {\n\t\t\tvar ownerDocument = this.el.ownerDocument;\n\n\t\t\tclearTimeout(this._dragStartTimer);\n\t\t\t_off(ownerDocument, 'mouseup', this._disableDelayedDrag);\n\t\t\t_off(ownerDocument, 'touchend', this._disableDelayedDrag);\n\t\t\t_off(ownerDocument, 'touchcancel', this._disableDelayedDrag);\n\t\t\t_off(ownerDocument, 'mousemove', this._disableDelayedDrag);\n\t\t\t_off(ownerDocument, 'touchmove', this._disableDelayedDrag);\n\t\t\t_off(ownerDocument, 'pointermove', this._disableDelayedDrag);\n\t\t},\n\n\t\t_triggerDragStart: function (/** Event */evt, /** Touch */touch) {\n\t\t\ttouch = touch || (evt.pointerType == 'touch' ? evt : null);\n\n\t\t\tif (touch) {\n\t\t\t\t// Touch device support\n\t\t\t\ttapEvt = {\n\t\t\t\t\ttarget: dragEl,\n\t\t\t\t\tclientX: touch.clientX,\n\t\t\t\t\tclientY: touch.clientY\n\t\t\t\t};\n\n\t\t\t\tthis._onDragStart(tapEvt, 'touch');\n\t\t\t}\n\t\t\telse if (!this.nativeDraggable) {\n\t\t\t\tthis._onDragStart(tapEvt, true);\n\t\t\t}\n\t\t\telse {\n\t\t\t\t_on(dragEl, 'dragend', this);\n\t\t\t\t_on(rootEl, 'dragstart', this._onDragStart);\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tif (document.selection) {\n\t\t\t\t\t// Timeout neccessary for IE9\n\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\tdocument.selection.empty();\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\twindow.getSelection().removeAllRanges();\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t}\n\t\t},\n\n\t\t_dragStarted: function () {\n\t\t\tif (rootEl && dragEl) {\n\t\t\t\tvar options = this.options;\n\n\t\t\t\t// Apply effect\n\t\t\t\t_toggleClass(dragEl, options.ghostClass, true);\n\t\t\t\t_toggleClass(dragEl, options.dragClass, false);\n\n\t\t\t\tSortable.active = this;\n\n\t\t\t\t// Drag start event\n\t\t\t\t_dispatchEvent(this, rootEl, 'start', dragEl, rootEl, oldIndex);\n\t\t\t} else {\n\t\t\t\tthis._nulling();\n\t\t\t}\n\t\t},\n\n\t\t_emulateDragOver: function () {\n\t\t\tif (touchEvt) {\n\t\t\t\tif (this._lastX === touchEvt.clientX && this._lastY === touchEvt.clientY) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis._lastX = touchEvt.clientX;\n\t\t\t\tthis._lastY = touchEvt.clientY;\n\n\t\t\t\tif (!supportCssPointerEvents) {\n\t\t\t\t\t_css(ghostEl, 'display', 'none');\n\t\t\t\t}\n\n\t\t\t\tvar target = document.elementFromPoint(touchEvt.clientX, touchEvt.clientY),\n\t\t\t\t\tparent = target,\n\t\t\t\t\ti = touchDragOverListeners.length;\n\n\t\t\t\tif (parent) {\n\t\t\t\t\tdo {\n\t\t\t\t\t\tif (parent[expando]) {\n\t\t\t\t\t\t\twhile (i--) {\n\t\t\t\t\t\t\t\ttouchDragOverListeners[i]({\n\t\t\t\t\t\t\t\t\tclientX: touchEvt.clientX,\n\t\t\t\t\t\t\t\t\tclientY: touchEvt.clientY,\n\t\t\t\t\t\t\t\t\ttarget: target,\n\t\t\t\t\t\t\t\t\trootEl: parent\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ttarget = parent; // store last element\n\t\t\t\t\t}\n\t\t\t\t\t/* jshint boss:true */\n\t\t\t\t\twhile (parent = parent.parentNode);\n\t\t\t\t}\n\n\t\t\t\tif (!supportCssPointerEvents) {\n\t\t\t\t\t_css(ghostEl, 'display', '');\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\n\t\t_onTouchMove: function (/**TouchEvent*/evt) {\n\t\t\tif (tapEvt) {\n\t\t\t\tvar\toptions = this.options,\n\t\t\t\t\tfallbackTolerance = options.fallbackTolerance,\n\t\t\t\t\tfallbackOffset = options.fallbackOffset,\n\t\t\t\t\ttouch = evt.touches ? evt.touches[0] : evt,\n\t\t\t\t\tdx = (touch.clientX - tapEvt.clientX) + fallbackOffset.x,\n\t\t\t\t\tdy = (touch.clientY - tapEvt.clientY) + fallbackOffset.y,\n\t\t\t\t\ttranslate3d = evt.touches ? 'translate3d(' + dx + 'px,' + dy + 'px,0)' : 'translate(' + dx + 'px,' + dy + 'px)';\n\n\t\t\t\t// only set the status to dragging, when we are actually dragging\n\t\t\t\tif (!Sortable.active) {\n\t\t\t\t\tif (fallbackTolerance &&\n\t\t\t\t\t\tmin(abs(touch.clientX - this._lastX), abs(touch.clientY - this._lastY)) < fallbackTolerance\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis._dragStarted();\n\t\t\t\t}\n\n\t\t\t\t// as well as creating the ghost element on the document body\n\t\t\t\tthis._appendGhost();\n\n\t\t\t\tmoved = true;\n\t\t\t\ttouchEvt = touch;\n\n\t\t\t\t_css(ghostEl, 'webkitTransform', translate3d);\n\t\t\t\t_css(ghostEl, 'mozTransform', translate3d);\n\t\t\t\t_css(ghostEl, 'msTransform', translate3d);\n\t\t\t\t_css(ghostEl, 'transform', translate3d);\n\n\t\t\t\tevt.preventDefault();\n\t\t\t}\n\t\t},\n\n\t\t_appendGhost: function () {\n\t\t\tif (!ghostEl) {\n\t\t\t\tvar rect = dragEl.getBoundingClientRect(),\n\t\t\t\t\tcss = _css(dragEl),\n\t\t\t\t\toptions = this.options,\n\t\t\t\t\tghostRect;\n\n\t\t\t\tghostEl = dragEl.cloneNode(true);\n\n\t\t\t\t_toggleClass(ghostEl, options.ghostClass, false);\n\t\t\t\t_toggleClass(ghostEl, options.fallbackClass, true);\n\t\t\t\t_toggleClass(ghostEl, options.dragClass, true);\n\n\t\t\t\t_css(ghostEl, 'top', rect.top - parseInt(css.marginTop, 10));\n\t\t\t\t_css(ghostEl, 'left', rect.left - parseInt(css.marginLeft, 10));\n\t\t\t\t_css(ghostEl, 'width', rect.width);\n\t\t\t\t_css(ghostEl, 'height', rect.height);\n\t\t\t\t_css(ghostEl, 'opacity', '0.8');\n\t\t\t\t_css(ghostEl, 'position', 'fixed');\n\t\t\t\t_css(ghostEl, 'zIndex', '100000');\n\t\t\t\t_css(ghostEl, 'pointerEvents', 'none');\n\n\t\t\t\toptions.fallbackOnBody && document.body.appendChild(ghostEl) || rootEl.appendChild(ghostEl);\n\n\t\t\t\t// Fixing dimensions.\n\t\t\t\tghostRect = ghostEl.getBoundingClientRect();\n\t\t\t\t_css(ghostEl, 'width', rect.width * 2 - ghostRect.width);\n\t\t\t\t_css(ghostEl, 'height', rect.height * 2 - ghostRect.height);\n\t\t\t}\n\t\t},\n\n\t\t_onDragStart: function (/**Event*/evt, /**boolean*/useFallback) {\n\t\t\tvar dataTransfer = evt.dataTransfer,\n\t\t\t\toptions = this.options;\n\n\t\t\tthis._offUpEvents();\n\n\t\t\tif (activeGroup.checkPull(this, this, dragEl, evt)) {\n\t\t\t\tcloneEl = _clone(dragEl);\n\n\t\t\t\tcloneEl.draggable = false;\n\t\t\t\tcloneEl.style['will-change'] = '';\n\n\t\t\t\t_css(cloneEl, 'display', 'none');\n\t\t\t\t_toggleClass(cloneEl, this.options.chosenClass, false);\n\n\t\t\t\trootEl.insertBefore(cloneEl, dragEl);\n\t\t\t\t_dispatchEvent(this, rootEl, 'clone', dragEl);\n\t\t\t}\n\n\t\t\t_toggleClass(dragEl, options.dragClass, true);\n\n\t\t\tif (useFallback) {\n\t\t\t\tif (useFallback === 'touch') {\n\t\t\t\t\t// Bind touch events\n\t\t\t\t\t_on(document, 'touchmove', this._onTouchMove);\n\t\t\t\t\t_on(document, 'touchend', this._onDrop);\n\t\t\t\t\t_on(document, 'touchcancel', this._onDrop);\n\t\t\t\t\t_on(document, 'pointermove', this._onTouchMove);\n\t\t\t\t\t_on(document, 'pointerup', this._onDrop);\n\t\t\t\t} else {\n\t\t\t\t\t// Old brwoser\n\t\t\t\t\t_on(document, 'mousemove', this._onTouchMove);\n\t\t\t\t\t_on(document, 'mouseup', this._onDrop);\n\t\t\t\t}\n\n\t\t\t\tthis._loopId = setInterval(this._emulateDragOver, 50);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (dataTransfer) {\n\t\t\t\t\tdataTransfer.effectAllowed = 'move';\n\t\t\t\t\toptions.setData && options.setData.call(this, dataTransfer, dragEl);\n\t\t\t\t}\n\n\t\t\t\t_on(document, 'drop', this);\n\t\t\t\tsetTimeout(this._dragStarted, 0);\n\t\t\t}\n\t\t},\n\n\t\t_onDragOver: function (/**Event*/evt) {\n\t\t\tvar el = this.el,\n\t\t\t\ttarget,\n\t\t\t\tdragRect,\n\t\t\t\ttargetRect,\n\t\t\t\trevert,\n\t\t\t\toptions = this.options,\n\t\t\t\tgroup = options.group,\n\t\t\t\tactiveSortable = Sortable.active,\n\t\t\t\tisOwner = (activeGroup === group),\n\t\t\t\tisMovingBetweenSortable = false,\n\t\t\t\tcanSort = options.sort;\n\n\t\t\tif (evt.preventDefault !== void 0) {\n\t\t\t\tevt.preventDefault();\n\t\t\t\t!options.dragoverBubble && evt.stopPropagation();\n\t\t\t}\n\n\t\t\tif (dragEl.animated) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tmoved = true;\n\n\t\t\tif (activeSortable && !options.disabled &&\n\t\t\t\t(isOwner\n\t\t\t\t\t? canSort || (revert = !rootEl.contains(dragEl)) // Reverting item into the original list\n\t\t\t\t\t: (\n\t\t\t\t\t\tputSortable === this ||\n\t\t\t\t\t\t(\n\t\t\t\t\t\t\t(activeSortable.lastPullMode = activeGroup.checkPull(this, activeSortable, dragEl, evt)) &&\n\t\t\t\t\t\t\tgroup.checkPut(this, activeSortable, dragEl, evt)\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t) &&\n\t\t\t\t(evt.rootEl === void 0 || evt.rootEl === this.el) // touch fallback\n\t\t\t) {\n\t\t\t\t// Smart auto-scrolling\n\t\t\t\t_autoScroll(evt, options, this.el);\n\n\t\t\t\tif (_silent) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\ttarget = _closest(evt.target, options.draggable, el);\n\t\t\t\tdragRect = dragEl.getBoundingClientRect();\n\n\t\t\t\tif (putSortable !== this) {\n\t\t\t\t\tputSortable = this;\n\t\t\t\t\tisMovingBetweenSortable = true;\n\t\t\t\t}\n\n\t\t\t\tif (revert) {\n\t\t\t\t\t_cloneHide(activeSortable, true);\n\t\t\t\t\tparentEl = rootEl; // actualization\n\n\t\t\t\t\tif (cloneEl || nextEl) {\n\t\t\t\t\t\trootEl.insertBefore(dragEl, cloneEl || nextEl);\n\t\t\t\t\t}\n\t\t\t\t\telse if (!canSort) {\n\t\t\t\t\t\trootEl.appendChild(dragEl);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\n\t\t\t\tif ((el.children.length === 0) || (el.children[0] === ghostEl) ||\n\t\t\t\t\t(el === evt.target) && (_ghostIsLast(el, evt))\n\t\t\t\t) {\n\t\t\t\t\t//assign target only if condition is true\n\t\t\t\t\tif (el.children.length !== 0 && el.children[0] !== ghostEl && el === evt.target) {\n\t\t\t\t\t\ttarget = el.lastElementChild;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (target) {\n\t\t\t\t\t\tif (target.animated) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ttargetRect = target.getBoundingClientRect();\n\t\t\t\t\t}\n\n\t\t\t\t\t_cloneHide(activeSortable, isOwner);\n\n\t\t\t\t\tif (_onMove(rootEl, el, dragEl, dragRect, target, targetRect, evt) !== false) {\n\t\t\t\t\t\tif (!dragEl.contains(el)) {\n\t\t\t\t\t\t\tel.appendChild(dragEl);\n\t\t\t\t\t\t\tparentEl = el; // actualization\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis._animate(dragRect, dragEl);\n\t\t\t\t\t\ttarget && this._animate(targetRect, target);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (target && !target.animated && target !== dragEl && (target.parentNode[expando] !== void 0)) {\n\t\t\t\t\tif (lastEl !== target) {\n\t\t\t\t\t\tlastEl = target;\n\t\t\t\t\t\tlastCSS = _css(target);\n\t\t\t\t\t\tlastParentCSS = _css(target.parentNode);\n\t\t\t\t\t}\n\n\t\t\t\t\ttargetRect = target.getBoundingClientRect();\n\n\t\t\t\t\tvar width = targetRect.right - targetRect.left,\n\t\t\t\t\t\theight = targetRect.bottom - targetRect.top,\n\t\t\t\t\t\tfloating = R_FLOAT.test(lastCSS.cssFloat + lastCSS.display)\n\t\t\t\t\t\t\t|| (lastParentCSS.display == 'flex' && lastParentCSS['flex-direction'].indexOf('row') === 0),\n\t\t\t\t\t\tisWide = (target.offsetWidth > dragEl.offsetWidth),\n\t\t\t\t\t\tisLong = (target.offsetHeight > dragEl.offsetHeight),\n\t\t\t\t\t\thalfway = (floating ? (evt.clientX - targetRect.left) / width : (evt.clientY - targetRect.top) / height) > 0.5,\n\t\t\t\t\t\tnextSibling = target.nextElementSibling,\n\t\t\t\t\t\tafter = false\n\t\t\t\t\t;\n\n\t\t\t\t\tif (floating) {\n\t\t\t\t\t\tvar elTop = dragEl.offsetTop,\n\t\t\t\t\t\t\ttgTop = target.offsetTop;\n\n\t\t\t\t\t\tif (elTop === tgTop) {\n\t\t\t\t\t\t\tafter = (target.previousElementSibling === dragEl) && !isWide || halfway && isWide;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (target.previousElementSibling === dragEl || dragEl.previousElementSibling === target) {\n\t\t\t\t\t\t\tafter = (evt.clientY - targetRect.top) / height > 0.5;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tafter = tgTop > elTop;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if (!isMovingBetweenSortable) {\n\t\t\t\t\t\tafter = (nextSibling !== dragEl) && !isLong || halfway && isLong;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar moveVector = _onMove(rootEl, el, dragEl, dragRect, target, targetRect, evt, after);\n\n\t\t\t\t\tif (moveVector !== false) {\n\t\t\t\t\t\tif (moveVector === 1 || moveVector === -1) {\n\t\t\t\t\t\t\tafter = (moveVector === 1);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t_silent = true;\n\t\t\t\t\t\tsetTimeout(_unsilent, 30);\n\n\t\t\t\t\t\t_cloneHide(activeSortable, isOwner);\n\n\t\t\t\t\t\tif (!dragEl.contains(el)) {\n\t\t\t\t\t\t\tif (after && !nextSibling) {\n\t\t\t\t\t\t\t\tel.appendChild(dragEl);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\ttarget.parentNode.insertBefore(dragEl, after ? nextSibling : target);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tparentEl = dragEl.parentNode; // actualization\n\n\t\t\t\t\t\tthis._animate(dragRect, dragEl);\n\t\t\t\t\t\tthis._animate(targetRect, target);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t_animate: function (prevRect, target) {\n\t\t\tvar ms = this.options.animation;\n\n\t\t\tif (ms) {\n\t\t\t\tvar currentRect = target.getBoundingClientRect();\n\n\t\t\t\tif (prevRect.nodeType === 1) {\n\t\t\t\t\tprevRect = prevRect.getBoundingClientRect();\n\t\t\t\t}\n\n\t\t\t\t_css(target, 'transition', 'none');\n\t\t\t\t_css(target, 'transform', 'translate3d('\n\t\t\t\t\t+ (prevRect.left - currentRect.left) + 'px,'\n\t\t\t\t\t+ (prevRect.top - currentRect.top) + 'px,0)'\n\t\t\t\t);\n\n\t\t\t\ttarget.offsetWidth; // repaint\n\n\t\t\t\t_css(target, 'transition', 'all ' + ms + 'ms');\n\t\t\t\t_css(target, 'transform', 'translate3d(0,0,0)');\n\n\t\t\t\tclearTimeout(target.animated);\n\t\t\t\ttarget.animated = setTimeout(function () {\n\t\t\t\t\t_css(target, 'transition', '');\n\t\t\t\t\t_css(target, 'transform', '');\n\t\t\t\t\ttarget.animated = false;\n\t\t\t\t}, ms);\n\t\t\t}\n\t\t},\n\n\t\t_offUpEvents: function () {\n\t\t\tvar ownerDocument = this.el.ownerDocument;\n\n\t\t\t_off(document, 'touchmove', this._onTouchMove);\n\t\t\t_off(document, 'pointermove', this._onTouchMove);\n\t\t\t_off(ownerDocument, 'mouseup', this._onDrop);\n\t\t\t_off(ownerDocument, 'touchend', this._onDrop);\n\t\t\t_off(ownerDocument, 'pointerup', this._onDrop);\n\t\t\t_off(ownerDocument, 'touchcancel', this._onDrop);\n\t\t\t_off(ownerDocument, 'pointercancel', this._onDrop);\n\t\t\t_off(ownerDocument, 'selectstart', this);\n\t\t},\n\n\t\t_onDrop: function (/**Event*/evt) {\n\t\t\tvar el = this.el,\n\t\t\t\toptions = this.options;\n\n\t\t\tclearInterval(this._loopId);\n\t\t\tclearInterval(autoScroll.pid);\n\t\t\tclearTimeout(this._dragStartTimer);\n\n\t\t\t// Unbind events\n\t\t\t_off(document, 'mousemove', this._onTouchMove);\n\n\t\t\tif (this.nativeDraggable) {\n\t\t\t\t_off(document, 'drop', this);\n\t\t\t\t_off(el, 'dragstart', this._onDragStart);\n\t\t\t}\n\n\t\t\tthis._offUpEvents();\n\n\t\t\tif (evt) {\n\t\t\t\tif (moved) {\n\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\t!options.dropBubble && evt.stopPropagation();\n\t\t\t\t}\n\n\t\t\t\tghostEl && ghostEl.parentNode && ghostEl.parentNode.removeChild(ghostEl);\n\n\t\t\t\tif (rootEl === parentEl || Sortable.active.lastPullMode !== 'clone') {\n\t\t\t\t\t// Remove clone\n\t\t\t\t\tcloneEl && cloneEl.parentNode && cloneEl.parentNode.removeChild(cloneEl);\n\t\t\t\t}\n\n\t\t\t\tif (dragEl) {\n\t\t\t\t\tif (this.nativeDraggable) {\n\t\t\t\t\t\t_off(dragEl, 'dragend', this);\n\t\t\t\t\t}\n\n\t\t\t\t\t_disableDraggable(dragEl);\n\t\t\t\t\tdragEl.style['will-change'] = '';\n\n\t\t\t\t\t// Remove class's\n\t\t\t\t\t_toggleClass(dragEl, this.options.ghostClass, false);\n\t\t\t\t\t_toggleClass(dragEl, this.options.chosenClass, false);\n\n\t\t\t\t\t// Drag stop event\n\t\t\t\t\t_dispatchEvent(this, rootEl, 'unchoose', dragEl, rootEl, oldIndex);\n\n\t\t\t\t\tif (rootEl !== parentEl) {\n\t\t\t\t\t\tnewIndex = _index(dragEl, options.draggable);\n\n\t\t\t\t\t\tif (newIndex >= 0) {\n\t\t\t\t\t\t\t// Add event\n\t\t\t\t\t\t\t_dispatchEvent(null, parentEl, 'add', dragEl, rootEl, oldIndex, newIndex);\n\n\t\t\t\t\t\t\t// Remove event\n\t\t\t\t\t\t\t_dispatchEvent(this, rootEl, 'remove', dragEl, rootEl, oldIndex, newIndex);\n\n\t\t\t\t\t\t\t// drag from one list and drop into another\n\t\t\t\t\t\t\t_dispatchEvent(null, parentEl, 'sort', dragEl, rootEl, oldIndex, newIndex);\n\t\t\t\t\t\t\t_dispatchEvent(this, rootEl, 'sort', dragEl, rootEl, oldIndex, newIndex);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tif (dragEl.nextSibling !== nextEl) {\n\t\t\t\t\t\t\t// Get the index of the dragged element within its parent\n\t\t\t\t\t\t\tnewIndex = _index(dragEl, options.draggable);\n\n\t\t\t\t\t\t\tif (newIndex >= 0) {\n\t\t\t\t\t\t\t\t// drag & drop within the same list\n\t\t\t\t\t\t\t\t_dispatchEvent(this, rootEl, 'update', dragEl, rootEl, oldIndex, newIndex);\n\t\t\t\t\t\t\t\t_dispatchEvent(this, rootEl, 'sort', dragEl, rootEl, oldIndex, newIndex);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (Sortable.active) {\n\t\t\t\t\t\t/* jshint eqnull:true */\n\t\t\t\t\t\tif (newIndex == null || newIndex === -1) {\n\t\t\t\t\t\t\tnewIndex = oldIndex;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t_dispatchEvent(this, rootEl, 'end', dragEl, rootEl, oldIndex, newIndex);\n\n\t\t\t\t\t\t// Save sorting\n\t\t\t\t\t\tthis.save();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis._nulling();\n\t\t},\n\n\t\t_nulling: function() {\n\t\t\trootEl =\n\t\t\tdragEl =\n\t\t\tparentEl =\n\t\t\tghostEl =\n\t\t\tnextEl =\n\t\t\tcloneEl =\n\t\t\tlastDownEl =\n\n\t\t\tscrollEl =\n\t\t\tscrollParentEl =\n\n\t\t\ttapEvt =\n\t\t\ttouchEvt =\n\n\t\t\tmoved =\n\t\t\tnewIndex =\n\n\t\t\tlastEl =\n\t\t\tlastCSS =\n\n\t\t\tputSortable =\n\t\t\tactiveGroup =\n\t\t\tSortable.active = null;\n\n\t\t\tsavedInputChecked.forEach(function (el) {\n\t\t\t\tel.checked = true;\n\t\t\t});\n\t\t\tsavedInputChecked.length = 0;\n\t\t},\n\n\t\thandleEvent: function (/**Event*/evt) {\n\t\t\tswitch (evt.type) {\n\t\t\t\tcase 'drop':\n\t\t\t\tcase 'dragend':\n\t\t\t\t\tthis._onDrop(evt);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'dragover':\n\t\t\t\tcase 'dragenter':\n\t\t\t\t\tif (dragEl) {\n\t\t\t\t\t\tthis._onDragOver(evt);\n\t\t\t\t\t\t_globalDragOver(evt);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'selectstart':\n\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t},\n\n\n\t\t/**\n\t\t * Serializes the item into an array of string.\n\t\t * @returns {String[]}\n\t\t */\n\t\ttoArray: function () {\n\t\t\tvar order = [],\n\t\t\t\tel,\n\t\t\t\tchildren = this.el.children,\n\t\t\t\ti = 0,\n\t\t\t\tn = children.length,\n\t\t\t\toptions = this.options;\n\n\t\t\tfor (; i < n; i++) {\n\t\t\t\tel = children[i];\n\t\t\t\tif (_closest(el, options.draggable, this.el)) {\n\t\t\t\t\torder.push(el.getAttribute(options.dataIdAttr) || _generateId(el));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn order;\n\t\t},\n\n\n\t\t/**\n\t\t * Sorts the elements according to the array.\n\t\t * @param  {String[]}  order  order of the items\n\t\t */\n\t\tsort: function (order) {\n\t\t\tvar items = {}, rootEl = this.el;\n\n\t\t\tthis.toArray().forEach(function (id, i) {\n\t\t\t\tvar el = rootEl.children[i];\n\n\t\t\t\tif (_closest(el, this.options.draggable, rootEl)) {\n\t\t\t\t\titems[id] = el;\n\t\t\t\t}\n\t\t\t}, this);\n\n\t\t\torder.forEach(function (id) {\n\t\t\t\tif (items[id]) {\n\t\t\t\t\trootEl.removeChild(items[id]);\n\t\t\t\t\trootEl.appendChild(items[id]);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\n\t\t/**\n\t\t * Save the current sorting\n\t\t */\n\t\tsave: function () {\n\t\t\tvar store = this.options.store;\n\t\t\tstore && store.set(this);\n\t\t},\n\n\n\t\t/**\n\t\t * For each element in the set, get the first element that matches the selector by testing the element itself and traversing up through its ancestors in the DOM tree.\n\t\t * @param   {HTMLElement}  el\n\t\t * @param   {String}       [selector]  default: `options.draggable`\n\t\t * @returns {HTMLElement|null}\n\t\t */\n\t\tclosest: function (el, selector) {\n\t\t\treturn _closest(el, selector || this.options.draggable, this.el);\n\t\t},\n\n\n\t\t/**\n\t\t * Set/get option\n\t\t * @param   {string} name\n\t\t * @param   {*}      [value]\n\t\t * @returns {*}\n\t\t */\n\t\toption: function (name, value) {\n\t\t\tvar options = this.options;\n\n\t\t\tif (value === void 0) {\n\t\t\t\treturn options[name];\n\t\t\t} else {\n\t\t\t\toptions[name] = value;\n\n\t\t\t\tif (name === 'group') {\n\t\t\t\t\t_prepareGroup(options);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\n\t\t/**\n\t\t * Destroy\n\t\t */\n\t\tdestroy: function () {\n\t\t\tvar el = this.el;\n\n\t\t\tel[expando] = null;\n\n\t\t\t_off(el, 'mousedown', this._onTapStart);\n\t\t\t_off(el, 'touchstart', this._onTapStart);\n\t\t\t_off(el, 'pointerdown', this._onTapStart);\n\n\t\t\tif (this.nativeDraggable) {\n\t\t\t\t_off(el, 'dragover', this);\n\t\t\t\t_off(el, 'dragenter', this);\n\t\t\t}\n\n\t\t\t// Remove draggable attributes\n\t\t\tArray.prototype.forEach.call(el.querySelectorAll('[draggable]'), function (el) {\n\t\t\t\tel.removeAttribute('draggable');\n\t\t\t});\n\n\t\t\ttouchDragOverListeners.splice(touchDragOverListeners.indexOf(this._onDragOver), 1);\n\n\t\t\tthis._onDrop();\n\n\t\t\tthis.el = el = null;\n\t\t}\n\t};\n\n\n\tfunction _cloneHide(sortable, state) {\n\t\tif (sortable.lastPullMode !== 'clone') {\n\t\t\tstate = true;\n\t\t}\n\n\t\tif (cloneEl && (cloneEl.state !== state)) {\n\t\t\t_css(cloneEl, 'display', state ? 'none' : '');\n\n\t\t\tif (!state) {\n\t\t\t\tif (cloneEl.state) {\n\t\t\t\t\tif (sortable.options.group.revertClone) {\n\t\t\t\t\t\trootEl.insertBefore(cloneEl, nextEl);\n\t\t\t\t\t\tsortable._animate(dragEl, cloneEl);\n\t\t\t\t\t} else {\n\t\t\t\t\t\trootEl.insertBefore(cloneEl, dragEl);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcloneEl.state = state;\n\t\t}\n\t}\n\n\n\tfunction _closest(/**HTMLElement*/el, /**String*/selector, /**HTMLElement*/ctx) {\n\t\tif (el) {\n\t\t\tctx = ctx || document;\n\n\t\t\tdo {\n\t\t\t\tif ((selector === '>*' && el.parentNode === ctx) || _matches(el, selector)) {\n\t\t\t\t\treturn el;\n\t\t\t\t}\n\t\t\t\t/* jshint boss:true */\n\t\t\t} while (el = _getParentOrHost(el));\n\t\t}\n\n\t\treturn null;\n\t}\n\n\n\tfunction _getParentOrHost(el) {\n\t\tvar parent = el.host;\n\n\t\treturn (parent && parent.nodeType) ? parent : el.parentNode;\n\t}\n\n\n\tfunction _globalDragOver(/**Event*/evt) {\n\t\tif (evt.dataTransfer) {\n\t\t\tevt.dataTransfer.dropEffect = 'move';\n\t\t}\n\t\tevt.preventDefault();\n\t}\n\n\n\tfunction _on(el, event, fn) {\n\t\tel.addEventListener(event, fn, captureMode);\n\t}\n\n\n\tfunction _off(el, event, fn) {\n\t\tel.removeEventListener(event, fn, captureMode);\n\t}\n\n\n\tfunction _toggleClass(el, name, state) {\n\t\tif (el) {\n\t\t\tif (el.classList) {\n\t\t\t\tel.classList[state ? 'add' : 'remove'](name);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tvar className = (' ' + el.className + ' ').replace(R_SPACE, ' ').replace(' ' + name + ' ', ' ');\n\t\t\t\tel.className = (className + (state ? ' ' + name : '')).replace(R_SPACE, ' ');\n\t\t\t}\n\t\t}\n\t}\n\n\n\tfunction _css(el, prop, val) {\n\t\tvar style = el && el.style;\n\n\t\tif (style) {\n\t\t\tif (val === void 0) {\n\t\t\t\tif (document.defaultView && document.defaultView.getComputedStyle) {\n\t\t\t\t\tval = document.defaultView.getComputedStyle(el, '');\n\t\t\t\t}\n\t\t\t\telse if (el.currentStyle) {\n\t\t\t\t\tval = el.currentStyle;\n\t\t\t\t}\n\n\t\t\t\treturn prop === void 0 ? val : val[prop];\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (!(prop in style)) {\n\t\t\t\t\tprop = '-webkit-' + prop;\n\t\t\t\t}\n\n\t\t\t\tstyle[prop] = val + (typeof val === 'string' ? '' : 'px');\n\t\t\t}\n\t\t}\n\t}\n\n\n\tfunction _find(ctx, tagName, iterator) {\n\t\tif (ctx) {\n\t\t\tvar list = ctx.getElementsByTagName(tagName), i = 0, n = list.length;\n\n\t\t\tif (iterator) {\n\t\t\t\tfor (; i < n; i++) {\n\t\t\t\t\titerator(list[i], i);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn list;\n\t\t}\n\n\t\treturn [];\n\t}\n\n\n\n\tfunction _dispatchEvent(sortable, rootEl, name, targetEl, fromEl, startIndex, newIndex) {\n\t\tsortable = (sortable || rootEl[expando]);\n\n\t\tvar evt = document.createEvent('Event'),\n\t\t\toptions = sortable.options,\n\t\t\tonName = 'on' + name.charAt(0).toUpperCase() + name.substr(1);\n\n\t\tevt.initEvent(name, true, true);\n\n\t\tevt.to = rootEl;\n\t\tevt.from = fromEl || rootEl;\n\t\tevt.item = targetEl || rootEl;\n\t\tevt.clone = cloneEl;\n\n\t\tevt.oldIndex = startIndex;\n\t\tevt.newIndex = newIndex;\n\n\t\trootEl.dispatchEvent(evt);\n\n\t\tif (options[onName]) {\n\t\t\toptions[onName].call(sortable, evt);\n\t\t}\n\t}\n\n\n\tfunction _onMove(fromEl, toEl, dragEl, dragRect, targetEl, targetRect, originalEvt, willInsertAfter) {\n\t\tvar evt,\n\t\t\tsortable = fromEl[expando],\n\t\t\tonMoveFn = sortable.options.onMove,\n\t\t\tretVal;\n\n\t\tevt = document.createEvent('Event');\n\t\tevt.initEvent('move', true, true);\n\n\t\tevt.to = toEl;\n\t\tevt.from = fromEl;\n\t\tevt.dragged = dragEl;\n\t\tevt.draggedRect = dragRect;\n\t\tevt.related = targetEl || toEl;\n\t\tevt.relatedRect = targetRect || toEl.getBoundingClientRect();\n\t\tevt.willInsertAfter = willInsertAfter;\n\n\t\tfromEl.dispatchEvent(evt);\n\n\t\tif (onMoveFn) {\n\t\t\tretVal = onMoveFn.call(sortable, evt, originalEvt);\n\t\t}\n\n\t\treturn retVal;\n\t}\n\n\n\tfunction _disableDraggable(el) {\n\t\tel.draggable = false;\n\t}\n\n\n\tfunction _unsilent() {\n\t\t_silent = false;\n\t}\n\n\n\t/** @returns {HTMLElement|false} */\n\tfunction _ghostIsLast(el, evt) {\n\t\tvar lastEl = el.lastElementChild,\n\t\t\trect = lastEl.getBoundingClientRect();\n\n\t\t// 5 — min delta\n\t\t// abs — нельзя добавлять, а то глюки при наведении сверху\n\t\treturn (evt.clientY - (rect.top + rect.height) > 5) ||\n\t\t\t(evt.clientX - (rect.left + rect.width) > 5);\n\t}\n\n\n\t/**\n\t * Generate id\n\t * @param   {HTMLElement} el\n\t * @returns {String}\n\t * @private\n\t */\n\tfunction _generateId(el) {\n\t\tvar str = el.tagName + el.className + el.src + el.href + el.textContent,\n\t\t\ti = str.length,\n\t\t\tsum = 0;\n\n\t\twhile (i--) {\n\t\t\tsum += str.charCodeAt(i);\n\t\t}\n\n\t\treturn sum.toString(36);\n\t}\n\n\t/**\n\t * Returns the index of an element within its parent for a selected set of\n\t * elements\n\t * @param  {HTMLElement} el\n\t * @param  {selector} selector\n\t * @return {number}\n\t */\n\tfunction _index(el, selector) {\n\t\tvar index = 0;\n\n\t\tif (!el || !el.parentNode) {\n\t\t\treturn -1;\n\t\t}\n\n\t\twhile (el && (el = el.previousElementSibling)) {\n\t\t\tif ((el.nodeName.toUpperCase() !== 'TEMPLATE') && (selector === '>*' || _matches(el, selector))) {\n\t\t\t\tindex++;\n\t\t\t}\n\t\t}\n\n\t\treturn index;\n\t}\n\n\tfunction _matches(/**HTMLElement*/el, /**String*/selector) {\n\t\tif (el) {\n\t\t\tselector = selector.split('.');\n\n\t\t\tvar tag = selector.shift().toUpperCase(),\n\t\t\t\tre = new RegExp('\\\\s(' + selector.join('|') + ')(?=\\\\s)', 'g');\n\n\t\t\treturn (\n\t\t\t\t(tag === '' || el.nodeName.toUpperCase() == tag) &&\n\t\t\t\t(!selector.length || ((' ' + el.className + ' ').match(re) || []).length == selector.length)\n\t\t\t);\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tfunction _throttle(callback, ms) {\n\t\tvar args, _this;\n\n\t\treturn function () {\n\t\t\tif (args === void 0) {\n\t\t\t\targs = arguments;\n\t\t\t\t_this = this;\n\n\t\t\t\tsetTimeout(function () {\n\t\t\t\t\tif (args.length === 1) {\n\t\t\t\t\t\tcallback.call(_this, args[0]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcallback.apply(_this, args);\n\t\t\t\t\t}\n\n\t\t\t\t\targs = void 0;\n\t\t\t\t}, ms);\n\t\t\t}\n\t\t};\n\t}\n\n\tfunction _extend(dst, src) {\n\t\tif (dst && src) {\n\t\t\tfor (var key in src) {\n\t\t\t\tif (src.hasOwnProperty(key)) {\n\t\t\t\t\tdst[key] = src[key];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn dst;\n\t}\n\n\tfunction _clone(el) {\n\t\treturn $\n\t\t\t? $(el).clone(true)[0]\n\t\t\t: (Polymer && Polymer.dom\n\t\t\t\t? Polymer.dom(el).cloneNode(true)\n\t\t\t\t: el.cloneNode(true)\n\t\t\t);\n\t}\n\n\tfunction _saveInputCheckedState(root) {\n\t\tvar inputs = root.getElementsByTagName('input');\n\t\tvar idx = inputs.length;\n\n\t\twhile (idx--) {\n\t\t\tvar el = inputs[idx];\n\t\t\tel.checked && savedInputChecked.push(el);\n\t\t}\n\t}\n\n\t// Fixed #973: \n\t_on(document, 'touchmove', function (evt) {\n\t\tif (Sortable.active) {\n\t\t\tevt.preventDefault();\n\t\t}\n\t});\n\n\ttry {\n\t\twindow.addEventListener('test', null, Object.defineProperty({}, 'passive', {\n\t\t\tget: function () {\n\t\t\t\tcaptureMode = {\n\t\t\t\t\tcapture: false,\n\t\t\t\t\tpassive: false\n\t\t\t\t};\n\t\t\t}\n\t\t}));\n\t} catch (err) {}\n\n\t// Export utils\n\tSortable.utils = {\n\t\ton: _on,\n\t\toff: _off,\n\t\tcss: _css,\n\t\tfind: _find,\n\t\tis: function (el, selector) {\n\t\t\treturn !!_closest(el, selector, el);\n\t\t},\n\t\textend: _extend,\n\t\tthrottle: _throttle,\n\t\tclosest: _closest,\n\t\ttoggleClass: _toggleClass,\n\t\tclone: _clone,\n\t\tindex: _index\n\t};\n\n\n\t/**\n\t * Create sortable instance\n\t * @param {HTMLElement}  el\n\t * @param {Object}      [options]\n\t */\n\tSortable.create = function (el, options) {\n\t\treturn new Sortable(el, options);\n\t};\n\n\n\t// Export\n\tSortable.version = '1.6.1';\n\treturn Sortable;\n});\n\n\n\n// WEBPACK FOOTER //\n// ./~/frontend-pagebuilder/~/sortablejs/Sortable.js","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/frontend-pagebuilder/src/scss/fpb-styles.scss\n// module id = 4\n// module chunks = 0","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/scss/sfb-styles.scss\n// module id = 10\n// module chunks = 0"],"sourceRoot":""}